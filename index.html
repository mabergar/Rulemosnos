<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>🎡 Rulemosnos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: 'Helvetica Neue', sans-serif;
      text-align: center;
      background-color: #f9f9f9;
      color: #333;
      padding: 40px;
    }
    h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
    }
    p {
      font-size: 1.2em;
    }
    .wheel-container {
      margin: 40px auto;
      position: relative;
      width: 250px;
      height: 250px;
    }
    canvas {
      width: 100%;
      height: 100%;
      border-radius: 50%;
    }
    .arrow {
      position: absolute;
      top: -20px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 15px solid transparent;
      border-right: 15px solid transparent;
      border-bottom: 20px solid #333;
    }
    button {
      padding: 15px 30px;
      font-size: 1.1em;
      background-color: #333;
      color: white;
      border: none;
      border-radius: 8px;
      margin-top: 30px;
      cursor: pointer;
    }
    #result {
      margin-top: 40px;
      font-size: 1.4em;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <h1>🎡 Rulemosnos</h1>
  <p>Gira la ruleta y deja que el tema surja</p>

  <div class="wheel-container">
    <div class="arrow"></div>
    <canvas id="wheel" width="500" height="500"></canvas>
  </div>

  <button onclick="spin()">¡Gírame!</button>
  <div id="result"></div>

  <script>
    const topics = [
      "¿Qué cambiarías del sistema electoral español?",
      "¿Qué lugar del mundo te gustaría visitar y por qué?",
      "¿Crees que la IA será una amenaza o una oportunidad?",
      "¿Cuál fue el mejor día de tu vida?",
      "¿Qué harías si te quedaran 24 horas de vida?",
      "¿Qué talento oculto tienes?",
      "¿Una película que te marcó?",
      "¿Qué significa para ti la libertad?"
    ];

    const colors = ['#f44336','#e91e63','#9c27b0','#3f51b5','#2196f3','#009688','#4caf50','#ff9800'];

    const canvas = document.getElementById("wheel");
    const ctx = canvas.getContext("2d");
    const slices = topics.length;
    const sliceAngle = 2 * Math.PI / slices;

    function drawWheel() {
      for (let i = 0; i < slices; i++) {
        ctx.beginPath();
        ctx.moveTo(250, 250);
        ctx.arc(250, 250, 250, i * sliceAngle, (i + 1) * sliceAngle);
        ctx.fillStyle = colors[i % colors.length];
        ctx.fill();
        ctx.save();
        ctx.translate(250, 250);
        ctx.rotate((i + 0.5) * sliceAngle);
        ctx.textAlign = "right";
        ctx.fillStyle = "#fff";
        ctx.font = "bold 14px sans-serif";
        ctx.fillText(topics[i], 240, 5);
        ctx.restore();
      }
    }

    drawWheel();

    let angle = 0;
    let spinning = false;

    function spin() {
      if (spinning) return;
      spinning = true;
      const spinAngle = Math.random() * 3000 + 3000;
      const duration = 4000;
      const start = performance.now();

      function animate(t) {
        const elapsed = t - start;
        const progress = Math.min(elapsed / duration, 1);
        const ease = 1 - Math.pow(1 - progress, 3);
        angle = (spinAngle * ease) % 360;
        canvas.style.transform = `rotate(${angle}deg)`;
        if (progress < 1) {
          requestAnimationFrame(animate);
        } else {
          const index = Math.floor(slices - (angle / 360 * slices)) % slices;
          document.getElementById("result").innerHTML = `👉 “${topics[index]}”`;
          spinning = false;
        }
      }

      requestAnimationFrame(animate);
    }
  </script>

</body>
</html>
